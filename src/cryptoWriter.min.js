/*
 * cryptoWriter.js
 * Author: Keshav Bajaj - @keshav-bajaj, keshav-bajaj.github.io
 * Description: Renders text in a brilliant style by displaying strings of random characters before the actual text.
 * How to use? Read the docs - https://github.com/keshav-bajaj/cryptoWriter/blob/main/README.md
 * License: MIT
 * Version: 1.0
 */
class cryptoWriter{constructor(a,b){function c(a,b){var c=0,d="";for(c=0;c<a;c++)d+=b[Math.floor(Math.random()*b.length)];return d}function d(a,b){var c=Array.from(b),d=0;for(d=0;d<c.length;d++)a.push(c[d])}function e(a){const b=a.getBoundingClientRect();return 0<=b.top&&0<=b.left&&b.bottom<=(window.innerHeight||document.documentElement.clientHeight)&&b.right<=(window.innerWidth||document.documentElement.clientWidth)}if(null==a)return console.error("An element is required to execute cryptoWriter.js !"),!1;const f={randomRounds:5,enabledSets:["letters","numbers","lettersCaps"],onVisible:!0,delayTime:.05,untilDelay:"random",completionTime:"auto",allAtOnce:!1};null==b&&(b="l");const g="qwertyuiopasdfghjklzxcvbnm".toUpperCase();var h=[];if(b.hasOwnProperty("customSet")){var j=b.customSet;if(Array.isArray(j)){var k=0;for(k=0;k<j.length;k++)h.push(j[k])}else console.error("'"+j+"' customSet is not an array!")}var k=0;const l=["letters","numbers","specialChars","lettersCaps"];var m=b.enabledSets||f.enabledSets;const n=["qwertyuiopasdfghjklzxcvbnm","1234567890","`!@#$%^&*()-=[]\\;',./~_+{}|:\"<>?",g];if("all"==m)for(k=0;k<n.length;k++)d(h,n[k]);else{for(k=0;k<m.length;k++)-1==l.indexOf(m[k])&&console.error(m[k]+" is not a valid set.");for(k=0;k<n.length;k++)-1!=m.indexOf(l[k])&&d(h,n[k])}if(0>=h.length)return console.error("You must select some inbuilt sets or add a customSet"),!1;var o;if((null==b.allAtOnce||null==b.allAtOnce)&&(o=f.allAtOnce),"boolean"!=typeof b.allAtOnce)o="true"==b.allAtOnce||"false"!=b.allAtOnce&&f.allAtOnce;else var o=b.allAtOnce;var p=b.delayTime||f.delayTime,q=b.randomRounds||f.randomRounds;q=parseInt(q);var r=b.completionTime||f.completionTime,s=a.innerText,t=Array.from(s);k=0;var u=t.length,v="",w=0,x=r.toString().substring(r.length-5,r.length);if("chars"==x&&(r=r.substring(0,r.length-5),r=u/r),"auto"==r&&(r=u/5),isNaN(p)||isNaN(q)||isNaN(r))return isNaN(p)&&console.error("'"+p+"' is not a number."),isNaN(q)&&console.error("'"+q+"' is not a number."),isNaN(r)&&console.error("'"+r+"' is not a number."),!1;switch(b.untilDelay||f.untilDelay){case"empty":a.innerText="";break;case"random":a.innerText=c(u,h);break;case"same":a.innerText=s;break;default:a.innerText=b.untilDelay;}var y;if((null==b.onVisible||null==b.onVisible)&&(y=f.onVisible),"boolean"!=typeof b.onVisible)y="true"==b.onVisible||"false"!=b.onVisible&&f.onVisible;else var y=b.onVisible;if(y)var z=setInterval(()=>{e(a)&&(clearInterval(z),setTimeout(()=>{var b=setInterval(()=>{k<t.length*q?(a.innerHTML=v+c(u,h),k++,0==k%q&&!0!=o&&(v+=t[w],u--,w++)):(clearInterval(b),a.innerHTML=s)},1e3*r/(t.length*q))},1e3*p))},1);else setTimeout(()=>{var b=setInterval(()=>{k<t.length*q?(a.innerHTML=v+c(u,h),k++,0==k%q&&!0!=o&&(v+=t[w],u--,w++)):(clearInterval(b),a.innerHTML=s)},1e3*r/(t.length*q))},1e3*p)}}